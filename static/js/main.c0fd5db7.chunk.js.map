{"version":3,"sources":["Message.tsx","Chat.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Message","props","date_moment","isMobile","moment","date","format","className","name","message","Chat","useState","messageField","setMessageField","latestMessageTime","setLatestMessageTime","latestMessageTimeRef","useRef","current","messageKey","setMessageKey","messageKeyRef","handleSubmitMessage","e","preventDefault","Date","now","date_unix","getTime","length","axios","post","toString","console","log","sent_message","key","setCurrentMessages","currentMessages","setOpen","useEffect","retrieve_all_messages","rawMessages","setRawMessages","rawMessagesRef","fetch","method","mode","headers","then","res","json","data","all_messages","map","message_info","index","retrieve_new_messages","last_message_unix","parseInt","queryString","new_messages","newMessagesJSX","messagesEndRef","scrollIntoView","behavior","height","window","innerHeight","numrows","Math","floor","openSnackBar","interval","setInterval","clearInterval","devButtons","showDevButtons","Container","maxWidth","disableGutters","ref","id","Box","width","TextField","label","fullWidth","multiline","rows","value","onChange","target","variant","color","onKeyDown","Snackbar","anchorOrigin","vertical","horizontal","open","onClose","autoHideDuration","Button","onClick","dateUnix","App","exact","path","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"kRAWe,SAASA,EAAQC,GAE/B,IAAIC,EAAeC,WAAgEC,IAAOH,EAAMI,MAAMC,OAAO,cAA/EF,IAAOH,EAAMI,MAAMC,OAAO,yBAExD,OACC,oCACC,6BAASC,UAAU,qBAClB,yBAAKA,UAAU,YAAf,IAA4BN,EAAMO,KAAlC,KACA,yBAAKD,UAAU,YAAf,IAA4BL,EAA5B,KACA,yBAAKK,UAAU,eAAf,IAA+BN,EAAMQ,QAArC,OCFW,SAASC,EAAKT,GAAkB,MAINU,mBAAS,IAJH,mBAIvCC,EAJuC,KAIzBC,EAJyB,OAMIF,mBAAS,GANb,mBAMvCG,EANuC,KAMpBC,EANoB,KAOxCC,EAAuBC,iBAAOH,GACpCE,EAAqBE,QAAUJ,EARe,MAUVH,mBAAS,GAVC,mBAUvCQ,EAVuC,KAU3BC,EAV2B,KAWxCC,EAAgBJ,iBAAOE,GAC7BE,EAAcH,QAAUC,EAGxB,IAAMG,EAAsB,SAACC,GAC5BA,EAAEC,iBAGF,IAAMhB,EAAO,sBACPH,EAAO,IAAIoB,KAAKA,KAAKC,OACrBjB,EAAUG,EACVe,EAAYtB,EAAKuB,UAGvB,GAA4B,IAAxBhB,EAAaiB,QAAgBjB,EAAaiB,OAAS,IAAM,CAC5DC,IAAMC,KAAK,mEAAoE,CAC9EvB,KAAMA,EACNH,KAAMA,EAAK2B,WACXvB,QAASA,EACTkB,UAAWA,IAEZM,QAAQC,IAAR,wBAA6BzB,IAE7BI,EAAgB,IAEhBO,EAAcC,EAAcH,QAAQ,GACpC,IAAMiB,EACL,kBAACnC,EAAD,CACCoC,IAAKf,EAAcH,QACnBV,KAAMA,EACNH,KAAMA,EAAK2B,WACXvB,QAASA,IAIX,OAFA4B,GAAmB,SAAAC,GAAe,4BAAQA,GAAR,CAAyBH,OAC3DpB,EAAqBY,IACd,EAIPY,GAAQ,IAUVC,qBAAU,WACTC,MACE,IA9D2C,MAgER9B,mBAAqB,CAAC,KAhEd,mBAgEvC+B,EAhEuC,KAgE1BC,EAhE0B,KAiExCC,EAAiB3B,iBAAOyB,GAC9BE,EAAe1B,QAAUwB,EAlEqB,MAoEA/B,mBAAqB,CAAC,KApEtB,mBAoEvC2B,EApEuC,KAoEtBD,EApEsB,KAuE9C,SAASI,IACRI,MAAM,uEAAwE,CAC7EC,OAAQ,MACRC,KAAK,OACLC,QAAS,CAAC,aAAe,sBAEzBC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GACNnB,QAAQC,IAAI,sCACZS,EAAeS,EAAKC,cACpB,IAAMxB,EAAgBuB,EAAKC,aAAaxB,OACxCT,EAAcC,EAAcH,QAAQW,GACpCQ,EAAmBe,EAAKC,aAAaC,KAAI,SAACC,EAAuBC,GAEhE,OACC,kBAACxD,EAAD,CACCoC,IAAKf,EAAcH,QAAUW,EAAS2B,EACtChD,KAAM+C,EAAa,GACnBlD,KAAMkD,EAAa,GACnB9C,QAAS8C,EAAa,YAQ3B,SAASE,IAER,IAAKb,EAAe1B,QAAQW,OAE3B,OADAY,IACO,KAGR,IAAIiB,EAAqBC,SAASf,EAAe1B,QAAQ0B,EAAe1B,QAAQW,OAAO,GAAG,IAAMb,EAAqBE,QAAW0B,EAAe1B,QAAQ0B,EAAe1B,QAAQW,OAAO,GAAG,GAAKb,EAAqBE,QAAQc,WAGpN4B,EAAW,oFAAgFF,GACjGzB,QAAQC,IAAR,2CAAgD0B,EAAhD,aAAwE,wBAGxEf,MAAMe,EAAa,CAClBd,OAAQ,MACRC,KAAK,OACLC,QAAS,CAAC,aAAe,sBAEzBC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAM,SAAAG,GAKN,GAJAnB,QAAQC,IAAR,qDAA0D,wBAC1DD,QAAQC,IAAI,qBACZD,QAAQC,IAAIkB,EAAKS,cAEbT,EAAKS,aAAahC,OAAQ,CAC7Bc,GAAe,SAAAD,GAAW,4BAAQA,GAAR,YAAwBU,EAAKS,kBACvD,IAAMhC,EAASuB,EAAKS,aAAahC,OACjCT,EAAcC,EAAcH,QAAUW,GACtC,IAAMiC,EAAiBV,EAAKS,aAAaP,KAAI,SAACC,EAAuBC,GAEpE,OACC,kBAACxD,EAAD,CACCoC,IAAKf,EAAcH,QAAUW,EAAS2B,EACtChD,KAAM+C,EAAa,GACnBlD,KAAMkD,EAAa,GACnB9C,QAAS8C,EAAa,QAKzBlB,GAAmB,SAAAC,GAAe,4BAAQA,GAAR,YAA4BwB,WAMjE,IAAMC,EAAqB9C,iBAAO,MAIlCuB,qBAHuB,WACtBuB,EAAe7C,QAAQ8C,eAAe,CAAEC,SAAU,aAEzB,CAAC3B,IAa3B,IAAM4B,EAAgBC,OAAOC,YACvBC,EAAiBC,KAAKC,MAAML,EAAO,KAnKK,EAsKdvD,oBAAS,GAtKK,mBAsKvC6D,EAtKuC,KAsKzBjC,EAtKyB,KA6K9CC,qBAAU,WACT,IAAMiC,EAAWC,aAAY,WAC5BjB,MACE,KACH,OAAO,kBAAMkB,cAAcF,MACzB,IAlL2C,MAqLT9D,oBAAS,GArLA,mBAqLvCiE,EArLuC,KAqL3BC,EArL2B,KAwM9C,OACC,oCAEC,kBAACC,EAAA,EAAD,CAAWC,SAAS,KAAKxE,UAAU,uBAAuByE,gBAAgB,GACzE,6BAASzE,UAAU,kBAGlB,yBAAKA,UAAU,2BAEd,yBAAKA,UAAU,qBACZ+B,EACF,yBAAK2C,IAAKlB,MAKZ,yBAAKmB,GAAG,mBACP,kBAACC,EAAA,EAAD,CAAKC,MAAM,QACV,kBAACC,EAAA,EAAD,CACCC,MAAK,yBAAoB,sBAApB,OACLC,WAAS,EACTC,WAAS,EACTC,KAAMpB,EACNqB,MAAO9E,EACP+E,SAAU,SAAApE,GAAC,OAAIV,EAAgBU,EAAEqE,OAAOF,QACxCG,QAAQ,WACRC,MAAM,UACNC,UA5KmB,SAACxE,GACb,SAATA,EAAEa,KAAkBd,EAAoBC,QAiLzC,kBAACyE,EAAA,EAAD,CACCF,MAAM,YACNG,aAAc,CACdC,SAAU,SACVC,WAAY,UAEZC,KAAM5B,EACN6B,QAxEiB,WACrB9D,GAAQ,IAwEJ+D,iBAAkB,IAClB7F,QAAQ,8CAIT,yBAAKF,UAAU,qBACd,kBAACgG,EAAA,EAAD,CACCV,QAAQ,YACRC,MAAM,UACNvF,UAAU,gBACViG,QAASlF,GAET,0BAAM4D,GAAG,sBAAT,cAOJ,4BAAQ3E,UAAU,gBAAgBiG,QA9EpC,WACCvE,QAAQC,IAAI,oBACZ2C,GAAgBD,KA4Ef,KACCA,EAAa,yBAAKrE,UAAU,mBAC5B,4BAAQiG,QA9GX,WACC3D,MAAM,qEAAsE,CAC3EC,OAAO,SACPC,KAAK,OACLC,QAAS,CAAC,aAAe,sBAEzBC,MAAK,WAAOhB,QAAQC,IAAI,8BAwGvB,MACA,4BAAQsE,QA3EX,WACC,IAAMC,EAAWhF,KAAKC,MAChBkC,EAAW,sFAAkF6C,GAEnG5D,MAAMe,EAAa,CAClBd,OAAO,SACPC,KAAM,OACNC,QAAS,CAAC,aAAe,sBAEzBC,MAAK,WAAOhB,QAAQC,IAAI,8BAkEvB,MACA,4BAAQsE,QAAS/D,GAAjB,MACA,4BAAQ+D,QAAS/C,GAAjB,OACO,MCpQIiD,MAlBf,WAGC,OAFAzE,QAAQC,IAAI,4BAIX,oCACC,kBAACxB,EAAD,MACA,kBAAC,IAAD,KACC,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAOiG,OAAK,EAACC,KAAK,SACjB,kBAAClG,EAAD,WCJcmG,QACW,cAA7B1C,OAAO2C,SAASC,UAEa,UAA7B5C,OAAO2C,SAASC,UAEhB5C,OAAO2C,SAASC,SAASC,MACrB,2DCZNC,IAASC,OACL,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,SDkItB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACnBvE,MAAK,SAACwE,GACLA,EAAaC,gBAEdC,OAAM,SAACC,GACN3F,QAAQ2F,MAAMA,EAAMnH,a","file":"static/js/main.c0fd5db7.chunk.js","sourcesContent":["import React,{ ReactElement } from 'react'\nimport moment from 'moment'\nimport { isMobile } from \"react-device-detect\";\n\n// Retrieving message information\nexport interface messageProps {\n\tname: string;\n\tdate: string;\n\tmessage: string;\n}\n\nexport default function Message(props: messageProps):ReactElement {\n\t// Reformat date (conditional on mobile display)\n\tvar date_moment = !isMobile ? moment(props.date).format('D MMMM YYYY  HH:mm:ss') : moment(props.date).format('D/M  HH:mm');\n\n\treturn (\n\t\t<>\n\t\t\t<section className=\"message_container\">\n\t\t\t\t<div className=\"msg_name\"> {props.name} </div>\n\t\t\t\t<div className=\"msg_date\"> {date_moment} </div>\n\t\t\t\t<div className=\"msg_message\"> {props.message} </div>\n\t\t\t</section>\n\t\t</>\n\t)\n}","import React, { useState, SyntheticEvent, useEffect, useRef, useMemo } from 'react';\nimport { Container, Button, TextField, Box, Snackbar } from '@material-ui/core';\nimport './App.css';\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Message from \"./Message\";\n\nexport interface chatProps {}  // No props being used right now\n\n// Defining location type to access name state\nexport interface locationProps {\n\tpathname: string;\n\tsearch: string;\n\thash: string;\n\tkey: string;\n\tstate: {name: string};\n}\n\nexport default function Chat(props: chatProps) {\n\t// Retrieve props passed from login\n\t// const location = useLocation() as locationProps; TODO:\n\n\tconst [messageField, setMessageField] = useState(\"\");           // Message input field\n\n\tconst [latestMessageTime, setLatestMessageTime] = useState(0);  // Last received/sent message time\n\tconst latestMessageTimeRef = useRef(latestMessageTime);         // Reference\n\tlatestMessageTimeRef.current = latestMessageTime;\n\t\n\tconst [messageKey, setMessageKey] = useState(0);\t\t\t\t// Div keys state\n\tconst messageKeyRef = useRef(messageKey);                       // Reference\n\tmessageKeyRef.current = messageKey;\n\n\t// Send information about input field to backend\n\tconst handleSubmitMessage = (e:SyntheticEvent) => {\n\t\te.preventDefault() // Prevents page from reloading after submitting message\n\n\t\t// Extract message fields\n\t\tconst name = 'location.state.name';\n\t\tconst date = new Date(Date.now());\n\t\tconst message = messageField;\n\t\tconst date_unix = date.getTime();\n\n\t\t// Send the message with POST request\n\t\tif (messageField.length !== 0 && messageField.length < 1000) {\n\t\t\taxios.post(\"https://online-chat-app-ellipsoul.herokuapp.com/api/send_message\", {\n\t\t\t\tname: name,\n\t\t\t\tdate: date.toString(),\n\t\t\t\tmessage: message,\n\t\t\t\tdate_unix: date_unix\n\t\t\t});\n\t\t\tconsole.log(`Message sent: ${message}`);\n\n\t\t\tsetMessageField(\"\")                            // Empty the message container\n\t\t\t// Increment message key and add message locally\n\t\t\tsetMessageKey(messageKeyRef.current+1)\n\t\t\tconst sent_message:any = \n\t\t\t\t<Message\n\t\t\t\t\tkey={messageKeyRef.current}\n\t\t\t\t\tname={name}\n\t\t\t\t\tdate={date.toString()}\n\t\t\t\t\tmessage={message}\n\t\t\t\t/>\n\t\t\tsetCurrentMessages(currentMessages => [...currentMessages, sent_message])\n\t\t\tsetLatestMessageTime(date_unix)  // Update latest message time\n\t\t\treturn false\n\t\t}\n\t\t// Flag down empty/long messages and open snackbar\n\t\telse {\n\t\t\tsetOpen(true);\n\t\t}\n\t}\n\n\t// Enter key functionality for sending messages\n\tconst checkEnterPressed = (e:any) => {\n\t\tif (e.key == \"Enter\") { handleSubmitMessage(e) }\n\t}\n\n\t// Retrieve all messages when page is loaded\n\tuseEffect(()=> {\n\t\tretrieve_all_messages();\n\t}, [])\n\n\tconst [rawMessages, setRawMessages] = useState<string[][]>([[]]);  // All messages in raw JSON format\n\tconst rawMessagesRef = useRef(rawMessages);                        // Reference handling\n\trawMessagesRef.current = rawMessages;\n\n\tconst [currentMessages, setCurrentMessages] = useState<string[][]>([[]]);   // All messages in JSX format\n\n\t// Retrieve all current messages from the server (only really call on first load of page)\n\tfunction retrieve_all_messages() {\n\t\tfetch(\"https://online-chat-app-ellipsoul.herokuapp.com/api/get_all_messages\", {\n\t\t\tmethod: \"GET\",\n\t\t\tmode:\"cors\",\n\t\t\theaders: {\"content_type\":\"application/json\"}\n\t\t})\n\t\t.then((res) => res.json())\n\t\t.then((data) => {\n\t\t\tconsole.log(\"Retrieved all messages from server\");\n\t\t\tsetRawMessages(data.all_messages);                  // Update raw messages\n\t\t\tconst length:number = data.all_messages.length;     // Handle div keys logic \n\t\t\tsetMessageKey(messageKeyRef.current+length);\n\t\t\tsetCurrentMessages(data.all_messages.map((message_info:string[], index:number) => {\n\t\t\t\t// Generate a message component for every message\n\t\t\t\treturn (\n\t\t\t\t\t<Message\n\t\t\t\t\t\tkey={messageKeyRef.current - length + index}\n\t\t\t\t\t\tname={message_info[0]}\n\t\t\t\t\t\tdate={message_info[1]}\n\t\t\t\t\t\tmessage={message_info[2]}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t}));\n\t\t})\n\t}\n\n\t// Retrieve only messages that the user has not loaded\n\tfunction retrieve_new_messages() {\n\t\t// If no raw messages loaded on client side then retrieve all messages from serverm instead\n\t\tif (!rawMessagesRef.current.length) { \n\t\t\tretrieve_all_messages();\n\t\t\treturn null\n\t\t}\n\t\t// Retrieve unix timestamp of last message user has (latest between user sent and others sent)\n\t\tlet last_message_unix = (parseInt(rawMessagesRef.current[rawMessagesRef.current.length-1][3]) > latestMessageTimeRef.current) ? rawMessagesRef.current[rawMessagesRef.current.length-1][3] : latestMessageTimeRef.current.toString()\n\n\t\t// Defining GET request query\n\t\tconst queryString = `https://online-chat-app-ellipsoul.herokuapp.com/api/get_new_messages?time=${last_message_unix}`;\n\t\tconsole.log(`Getting new messages with query: ${queryString} for user ${\"location.state.name\"}`)\n\n\t\t// Request new messages with query\n\t\tfetch(queryString, {\n\t\t\tmethod: \"GET\",\n\t\t\tmode:\"cors\",\n\t\t\theaders: {\"content_type\":\"application/json\"}\n\t\t})\n\t\t.then((res) => res.json())\n\t\t.then((data => {\n\t\t\tconsole.log(`Retrieve new messages from server for user ${'location.state.name'}`)\n\t\t\tconsole.log(\"New messages are:\")\n\t\t\tconsole.log(data.new_messages)\n\t\t\t// Render the new messages if some are retrieved\n\t\t\tif (data.new_messages.length) {\n\t\t\t\tsetRawMessages(rawMessages => [...rawMessages, ...data.new_messages])  // Update raw messsages\n\t\t\t\tconst length = data.new_messages.length;        \t\t\t\t\t   // Handle div keys\n\t\t\t\tsetMessageKey(messageKeyRef.current + length)\n\t\t\t\tconst newMessagesJSX = data.new_messages.map((message_info:string[], index:number) => {\n\t\t\t\t\t// Generate a message component for every message\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\tkey={messageKeyRef.current - length + index}\n\t\t\t\t\t\t\tname={message_info[0]}\n\t\t\t\t\t\t\tdate={message_info[1]}\n\t\t\t\t\t\t\tmessage={message_info[2]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t\t// Concatenate with currently existing messages\n\t\t\t\tsetCurrentMessages(currentMessages => [...currentMessages, ...newMessagesJSX])\n\t\t\t}\n\t\t}))\n\t}\n\n\t// Handle automatic scrolling down\n\tconst messagesEndRef:any = useRef(null);  // Bottom of messages reference\n\tconst scrollToBottom = () => {\n\t\tmessagesEndRef.current.scrollIntoView({ behavior: \"smooth\" })\n\t};\n\tuseEffect(scrollToBottom, [currentMessages]);\n\n\t// Delete all messages (Developer functionality only)\n\tfunction delete_messages() {\n\t\tfetch(\"https://online-chat-app-ellipsoul.herokuapp.com/api/clear_messages\", {\n\t\t\tmethod:\"DELETE\",\n\t\t\tmode:\"cors\",\n\t\t\theaders: {\"content_type\":\"application/json\"}\n\t\t})\n\t\t.then(() => {console.log(\"All messages deleted!\")})\n\t}\n\n\t// Determine number of rows for the chat input box\n\tconst height:number = window.innerHeight;\n\tconst numrows:number = Math.floor(height/200);\n\n\t// Tracks snackbar status\n\tconst [openSnackBar, setOpen] = useState(false);\t \t\n\t// Snackbar close handling\n\tconst closeSnackBar = () => {\n\t\tsetOpen(false)\n\t}\n\n\t// IMPORTANT: Asynchronously queries the server for new messages every second\n\tuseEffect(() => {\n\t\tconst interval = setInterval(() => {\n\t\t\tretrieve_new_messages();\n\t\t}, 5000)\n\t\treturn () => clearInterval(interval);\n\t}, []);\n\n\t// State handler for dev button\n\tconst [devButtons, showDevButtons] = useState(false);\n\tfunction open_dev_menu() {\n\t\tconsole.log(\"Dev menu toggled\")\n\t\tshowDevButtons(!devButtons)\n\t}\n\n\t// Send request to delete old messages\n\tfunction delete_old_messages() {\n\t\tconst dateUnix = Date.now();\n\t\tconst queryString = `https://online-chat-app-ellipsoul.herokuapp.com/api/clear_old_messages?time=${dateUnix}`\n\n\t\tfetch(queryString, {\n\t\t\tmethod:\"DELETE\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\"content_type\":\"application/json\"}\n\t\t})\n\t\t.then(() => {console.log(\"Old messages deleted!\")})\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{/* Main container and section */}\n\t\t\t<Container maxWidth=\"lg\" className=\"large_chat_container\" disableGutters={true}>\n\t\t\t\t<section className=\"chat_container\">\n\n\t\t\t\t\t{/* Div for displaying and deleting chat messages */}\n\t\t\t\t\t<div className=\"chat_messages_container\">\n\t\t\t\t\t\t{/* Div showing all chat messages */}\n\t\t\t\t\t\t<div className=\"chat_messages_div\">\n\t\t\t\t\t\t\t{ currentMessages }\n\t\t\t\t\t\t\t<div ref={messagesEndRef} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Div for chat message input field */}\n\t\t\t\t\t<div id=\"input_field_div\">\n\t\t\t\t\t\t<Box width=\"100%\">\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tlabel={`Say something, ${\"location.state.name\"} :)`}\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\trows={numrows}\n\t\t\t\t\t\t\t\tvalue={messageField}\n\t\t\t\t\t\t\t\tonChange={e => setMessageField(e.target.value)}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\tonKeyDown={checkEnterPressed}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Warning snackbar for invalid message */}\n\t\t\t\t\t<Snackbar\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\tvertical: 'bottom',\n\t\t\t\t\t\thorizontal: 'center',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\topen={openSnackBar}\n\t\t\t\t\t\tonClose={closeSnackBar}\n\t\t\t\t\t\tautoHideDuration={3000}\n\t\t\t\t\t\tmessage=\"Your message is either empty or too long!\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t{/* Submit button div */}\n\t\t\t\t\t<div className=\"submit_button_div\"> \n\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\tvariant=\"contained\" \n\t\t\t\t\t\t\tcolor=\"primary\" \n\t\t\t\t\t\t\tclassName=\"submit_button\"\n\t\t\t\t\t\t\tonClick={handleSubmitMessage}\n\t\t\t\t\t\t> \n\t\t\t\t\t\t\t<span id=\"submit_button_text\"> Send </span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\n\t\t\t\t</section>\n\t\t\t</Container>\n\n\t\t\t<button className=\"hidden_button\" onClick={open_dev_menu}>D</button>\n\t\t\t{devButtons ? <div className=\"dev_buttons_div\">\n\t\t\t\t<button onClick={delete_messages}>DA</button>\n\t\t\t\t<button onClick={delete_old_messages}>DO</button>\n\t\t\t\t<button onClick={retrieve_all_messages}>RA</button>\n\t\t\t\t<button onClick={retrieve_new_messages}>RN</button>\n\t\t\t</div>: null}\n\n\t\t</>\n\t)\n}","import React, { ReactElement, useState } from 'react';\nimport './App.css';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\";\nimport Login from './Login'\nimport Chat from './Chat'\n\nfunction App():ReactElement {\n\tconsole.log('Frontend is now running!');\t\n\n\treturn (\n\t\t// Basice router paths to the login and chat page\n\t\t<>\n\t\t\t<Chat />\n\t\t\t<Router>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path='/chat'> \n\t\t\t\t\t\t<Chat />\n\t\t\t\t\t</Route>\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t</>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n  ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL!,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost.\n        // Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n              'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n      .register(swUrl)\n      .then((registration) => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n                console.log(\n                    'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n                );\n\n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n\n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch((error) => {\n        console.error('Error during service worker registration:', error);\n      });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: {'Service-Worker': 'script'},\n  })\n      .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get('content-type');\n        if (\n          response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n        ) {\n        // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then((registration) => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n        // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log(\n            'No internet connection found. App is running in offline mode.',\n        );\n      });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n        .then((registration) => {\n          registration.unregister();\n        })\n        .catch((error) => {\n          console.error(error.message);\n        });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}